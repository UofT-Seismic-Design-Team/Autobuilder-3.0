<!doctype html>
<html class="no-js" lang="en">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />
<link rel="index" title="Index" href="genindex.html" /><link rel="search" title="Search" href="search.html" /><link rel="prev" title="Tower Variation" href="Towervariation.html" />

    <!-- Generated with Sphinx 6.2.1 and Furo 2023.05.20 -->
        <title>Performance - Autobuilder 0.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo.css?digest=e6660623a769aa55fea372102b9bf3151b292993" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo-extensions.css?digest=30d1aed668e5c3a91c3e3bf6a60b675221979f0e" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="index.html"><div class="brand">Autobuilder 0.1 documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="index.html">
  
  
  <span class="sidebar-brand-text">Autobuilder 0.1 documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="tutorial.html">Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="developer.html">Developer</a></li>
<li class="toctree-l1"><a class="reference internal" href="Towervariation.html">Tower Variation</a></li>
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">Performance</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <section id="performance">
<h1>Performance<a class="headerlink" href="#performance" title="Permalink to this heading">#</a></h1>
<section id="performance-analyzer">
<span id="performanceanalyzer"></span><h2>Performance Analyzer<a class="headerlink" href="#performance-analyzer" title="Permalink to this heading">#</a></h2>
<p>PerformanceAnalyzer provides methods for analyzing the performance and estimating the cost of a structure.</p>
<section id="getweight">
<h3>getWeight<a class="headerlink" href="#getweight" title="Permalink to this heading">#</a></h3>
<p>This method calculates the total weight of the structure:</p>
<ol class="arabic simple">
<li><p>Set units to meters</p></li>
<li><p>Select dead loads only and retrieve base reaction forces</p></li>
<li><p>Divide the base reactions in the global Z direction by the gravitational constant g to get the weight</p></li>
<li><p>Convert the weight into lbs</p></li>
</ol>
<p>The method <em>BaseReact()</em> returns zero if the reactions are successfully recovered, otherwise it returns a nonzero value.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">getWeight</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Calculate the total weight of a structure.</span>

<span class="sd">    This method sets the units to meters, retrieves the base reactions for the &#39;DEAD&#39; case,</span>
<span class="sd">    and calculates the total weight in pounds.</span>

<span class="sd">    :return: The total weight in pounds.</span>
<span class="sd">    :rtype: float</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">SapModel</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">SapModel</span>

    <span class="c1"># Set units to meters</span>
    <span class="n">SapModel</span><span class="o">.</span><span class="n">SetPresentUnits</span><span class="p">(</span><span class="n">SAP2000Constants</span><span class="o">.</span><span class="n">Units</span><span class="p">[</span><span class="s1">&#39;N_m_C&#39;</span><span class="p">])</span>

    <span class="c1"># Get base reactions</span>
    <span class="n">SapModel</span><span class="o">.</span><span class="n">Results</span><span class="o">.</span><span class="n">Setup</span><span class="o">.</span><span class="n">DeselectAllCasesAndCombosForOutput</span><span class="p">()</span>
    <span class="n">SapModel</span><span class="o">.</span><span class="n">Results</span><span class="o">.</span><span class="n">Setup</span><span class="o">.</span><span class="n">SetCaseSelectedForOutput</span><span class="p">(</span><span class="s1">&#39;DEAD&#39;</span><span class="p">)</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">SapModel</span><span class="o">.</span><span class="n">Results</span><span class="o">.</span><span class="n">BaseReact</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">ret</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;ERROR getting weight&#39;</span><span class="p">)</span>

    <span class="n">base_react</span> <span class="o">=</span> <span class="n">ret</span><span class="p">[</span><span class="mi">6</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">total_weight</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">base_react</span> <span class="o">/</span> <span class="n">Constants</span><span class="o">.</span><span class="n">g</span><span class="p">)</span>

    <span class="c1"># Convert to lb</span>
    <span class="n">total_weight</span> <span class="o">=</span> <span class="n">total_weight</span> <span class="o">/</span> <span class="n">UnitConversion</span><span class="o">.</span><span class="n">Mass</span><span class="p">[</span><span class="s1">&#39;lb&#39;</span><span class="p">]</span>

    <span class="k">return</span> <span class="n">total_weight</span>
</pre></div>
</div>
</section>
<section id="getmaxacceleration">
<h3>getMaxAcceleration<a class="headerlink" href="#getmaxacceleration" title="Permalink to this heading">#</a></h3>
<p>This method finds the maximum acceleration out of all roof nodes in units of g:</p>
<ol class="arabic simple">
<li><p>Set units to meters</p></li>
<li><p>Find the absolute acceleration for each roof node</p></li>
<li><p>Compare the acceleration of each node to find the maximum acceleration</p></li>
</ol>
<p>The method <em>JointAccAbs()</em> returns zero if the accelerations are successfully recovered, otherwise it returns a nonzero value.</p>
</section>
<section id="getperiod">
<h3>getPeriod<a class="headerlink" href="#getperiod" title="Permalink to this heading">#</a></h3>
<p>This method finds the modal period of the structure using the method <em>ModalPeriod()</em>.</p>
<p>The method <em>ModalPeriod()</em> returns zero if the data is successfully recovered, otherwise it returns a nonzero value.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">getPeriod</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get the modal period of the structure.</span>

<span class="sd">    :return: The period of the structure.</span>
<span class="sd">    :rtype: float</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">SapModel</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">SapModel</span>

    <span class="n">ret</span> <span class="o">=</span> <span class="n">SapModel</span><span class="o">.</span><span class="n">Results</span><span class="o">.</span><span class="n">ModalPeriod</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">ret</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;ERROR getting modal period&#39;</span><span class="p">)</span>
    <span class="n">period</span> <span class="o">=</span> <span class="n">ret</span><span class="p">[</span><span class="mi">4</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>

    <span class="k">return</span> <span class="n">period</span>
</pre></div>
</div>
</section>
<section id="getmaxdisplacement">
<h3>getMaxDisplacement<a class="headerlink" href="#getmaxdisplacement" title="Permalink to this heading">#</a></h3>
<p>This method finds the maximum displacement out of all roof nodes in millimeters:</p>
<ol class="arabic simple">
<li><p>Set units to millimeters</p></li>
<li><p>Find the absolute displacement for each roof node</p></li>
<li><p>Compare the displacement of each node to find the maximum displacement</p></li>
</ol>
<p>The method <em>JointAccAbs()</em> returns zero if the accelerations are successfully recovered, otherwise it returns a nonzero value.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">getMaxDisplacement</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">roofNodeNames</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get the maximum displacement of the roof nodes in millimeters.</span>

<span class="sd">    :param roofNodeNames: A list of roof node names.</span>
<span class="sd">    :type roofNodeNames: list</span>
<span class="sd">    :return: The maximum displacement in millimeters.</span>
<span class="sd">    :rtype: float</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">SapModel</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">SapModel</span>

    <span class="c1"># Set units to millimetres</span>
    <span class="n">SapModel</span><span class="o">.</span><span class="n">SetPresentUnits</span><span class="p">(</span><span class="n">SAP2000Constants</span><span class="o">.</span><span class="n">Units</span><span class="p">[</span><span class="s1">&#39;N_mm_C&#39;</span><span class="p">])</span>

    <span class="n">maxDisp</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">roofNodeName</span> <span class="ow">in</span> <span class="n">roofNodeNames</span><span class="p">:</span>
        <span class="n">ret</span> <span class="o">=</span> <span class="n">SapModel</span><span class="o">.</span><span class="n">Results</span><span class="o">.</span><span class="n">JointDispl</span><span class="p">(</span><span class="n">roofNodeName</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">ret</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;ERROR getting displacement at Node </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">roofNodeName</span><span class="p">))</span>

        <span class="n">max_and_min_disp</span> <span class="o">=</span> <span class="n">ret</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span>

        <span class="n">max_pos_disp</span> <span class="o">=</span> <span class="n">max_and_min_disp</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">min_neg_disp</span> <span class="o">=</span> <span class="n">max_pos_disp</span>

        <span class="c1"># Error handling: in case displacements are not available</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">max_and_min_disp</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">min_neg_disp</span> <span class="o">=</span> <span class="n">max_and_min_disp</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

        <span class="n">currentMaxDisp</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">max_pos_disp</span><span class="p">),</span> <span class="nb">abs</span><span class="p">(</span><span class="n">min_neg_disp</span><span class="p">))</span>
        <span class="n">maxDisp</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">maxDisp</span><span class="p">,</span> <span class="n">currentMaxDisp</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">maxDisp</span>
</pre></div>
</div>
</section>
<section id="getbaseshear">
<h3>getBaseShear<a class="headerlink" href="#getbaseshear" title="Permalink to this heading">#</a></h3>
<p>This method finds the base shear forces of the structure using the method <em>BaseReact(</em>).
The base shear force is the base reaction in the global X direction.</p>
<p>The method <em>BaseReact()</em> returns zero if the reactions are successfully recovered, otherwise it returns a nonzero value.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">getBaseShear</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd"> Get the base shear forces of the structure.</span>

<span class="sd">:return: The base shear force</span>
<span class="sd">:rtype: float</span>
<span class="sd">&quot;&quot;&quot;</span>
    <span class="n">SapModel</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">SapModel</span>

    <span class="n">ret</span> <span class="o">=</span> <span class="n">SapModel</span><span class="o">.</span><span class="n">Results</span><span class="o">.</span><span class="n">BaseReact</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">ret</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;ERROR getting base reaction&#39;</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">ret</span><span class="p">[</span><span class="mi">4</span><span class="p">])</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">basesh</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">ret</span><span class="p">[</span><span class="mi">4</span><span class="p">][</span><span class="mi">0</span><span class="p">]),</span> <span class="nb">abs</span><span class="p">(</span><span class="n">ret</span><span class="p">[</span><span class="mi">4</span><span class="p">][</span><span class="mi">1</span><span class="p">]))</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">basesh</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">ret</span><span class="p">[</span><span class="mi">4</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>

    <span class="k">return</span> <span class="n">basesh</span>
</pre></div>
</div>
</section>
<section id="getroofnodenames">
<h3>getRoofNodeNames<a class="headerlink" href="#getroofnodenames" title="Permalink to this heading">#</a></h3>
<p>This method finds the names of the roof nodes out of all the nodes of the structure:</p>
<ol class="arabic simple">
<li><p>Retrieve the names of all the nodes of the structure</p></li>
<li><p>Find the X, Y, Z coordinates for each node</p></li>
<li><p>Compare the coordinates of each node to find the maximum X, Y, Z coordinates and minimum X, Y coordinates. These coordinates indicates the coordinates of the roof corners.</p></li>
<li><p>Find the names of the roof corners</p></li>
</ol>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">getRoofNodeNames</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Get the names of nodes on the roof of the structure.</span>

<span class="sd">    This method identifies the nodes on the roof based on their coordinates and selects nodes</span>
<span class="sd">    at the quarter points on the top floor.</span>

<span class="sd">    :return: A list of node names on the roof.</span>
<span class="sd">    :rtype: list of str</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">SapModel</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">SapModel</span>

    <span class="n">roofNodeNames</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="c1"># Retrieve names of all nodes and store in allNodeNames (list)</span>
    <span class="p">[</span><span class="n">number_nodes</span><span class="p">,</span> <span class="n">allNodeNames</span><span class="p">,</span> <span class="n">ret</span><span class="p">]</span> <span class="o">=</span> <span class="n">SapModel</span><span class="o">.</span><span class="n">PointObj</span><span class="o">.</span><span class="n">GetNameList</span><span class="p">()</span>

    <span class="c1"># Initialize variables to track the maximum and minimum X, Y, Z coordinates of the nodes</span>
    <span class="n">z_max</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">x_max</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">y_max</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">x_min</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">y_min</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="c1"># Obtain the maximum X, Y, Z coordinates and minimum X, Y coordinates relative to the origin</span>
    <span class="k">for</span> <span class="n">nodeName</span> <span class="ow">in</span> <span class="n">allNodeNames</span><span class="p">:</span>
        <span class="p">[</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span> <span class="n">ret</span><span class="p">]</span> <span class="o">=</span> <span class="n">SapModel</span><span class="o">.</span><span class="n">PointObj</span><span class="o">.</span><span class="n">GetCoordCartesian</span><span class="p">(</span><span class="n">nodeName</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">x</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">SAP2000Constants</span><span class="o">.</span><span class="n">MaxDecimalPlaces</span><span class="p">)</span>
        <span class="n">y</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">SAP2000Constants</span><span class="o">.</span><span class="n">MaxDecimalPlaces</span><span class="p">)</span>
        <span class="n">z</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">z</span><span class="p">,</span> <span class="n">SAP2000Constants</span><span class="o">.</span><span class="n">MaxDecimalPlaces</span><span class="p">)</span>

        <span class="n">x_max</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">x_max</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span>
        <span class="n">y_max</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">y_max</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
        <span class="n">z_max</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">z_max</span><span class="p">,</span> <span class="n">z</span><span class="p">)</span>

        <span class="n">x_min</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">x_min</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span>
        <span class="n">y_min</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">y_min</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>

    <span class="n">x_width</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">x_max</span> <span class="o">-</span> <span class="n">x_min</span><span class="p">)</span>
    <span class="n">y_width</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">y_max</span> <span class="o">-</span> <span class="n">y_min</span><span class="p">)</span>

    <span class="c1"># Make sure we get results from a node that is at the quarter points on the top floor</span>
    <span class="k">for</span> <span class="n">nodeName</span> <span class="ow">in</span> <span class="n">allNodeNames</span><span class="p">:</span>
        <span class="p">[</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span> <span class="n">ret</span><span class="p">]</span> <span class="o">=</span> <span class="n">SapModel</span><span class="o">.</span><span class="n">PointObj</span><span class="o">.</span><span class="n">GetCoordCartesian</span><span class="p">(</span><span class="n">nodeName</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">z</span> <span class="o">==</span> <span class="n">z_max</span><span class="p">:</span>
            <span class="n">roofNodeNames</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">nodeName</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">roofNodeNames</span><span class="p">)</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
            <span class="k">break</span>

    <span class="k">return</span> <span class="n">roofNodeNames</span>
</pre></div>
</div>
</section>
<section id="getmemberstress">
<h3>getMemberStress<a class="headerlink" href="#getmemberstress" title="Permalink to this heading">#</a></h3>
<p>This method calculates the maximum stress of the selected members in a structure:</p>
<ol class="arabic simple">
<li><p>Set units to millimeters</p></li>
<li><p>Find the names of the selected members</p></li>
<li><p>For all but the maximum stress load combinations:</p>
<ol class="loweralpha simple">
<li><p>Select “combo” for load combinations</p></li>
<li><p>Set “Envelope” as the output option for modal history results</p></li>
<li><p>Get the name of the member section and then the properties of the member</p></li>
<li><p>For each member, find the maximum Tensile Stress, Compressive Stress, and Bending and Shear about both major and minor axes</p></li>
</ol>
</li>
</ol>
<p>Modal History describes the structure responds to dynamic loading over time.
The envelope type of modal history helps determine the maximum displacements, accelerations,
or other response quantities that the structure may experience due to dynamic loadings.</p>
<p>The method <em>GetSection(member)</em> finds the name of the member section
The method <em>GetSectProps(sectNames)</em> displays the mechanical properties of the member section, including the cross-sectional area, shear areas, torsional constant, and the moment of inertia, section modulus of bending, plastic modulus of bending of the local 2 and 3 axes</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">getMemberStress</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">selectedFrameMembers</span><span class="o">=</span><span class="p">[],</span> <span class="n">selectedWallMembers</span><span class="o">=</span><span class="p">[],</span>  <span class="n">maxStressIdentifier</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">allCombos</span><span class="o">=</span><span class="p">[]):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Calculate and return stress dataframes for frame members.</span>

<span class="sd">    This method calculates and returns four dataframes (Tensile, Compressive, Bending, Shear) that contain stress</span>
<span class="sd">    information for selected frame members. The stress data includes maximum tensile stress, maximum compressive stress,</span>
<span class="sd">    maximum bending stress, and maximum shear stress.</span>

<span class="sd">    :param selectedFrameMembers: List of selected frame members (optional, default is empty list).</span>
<span class="sd">    :type selectedFrameMembers: list of str</span>
<span class="sd">    :param selectedWallMembers: List of selected wall members (optional, default is empty list).</span>
<span class="sd">    :type selectedWallMembers: list of str</span>
<span class="sd">    :param maxStressIdentifier: Identifier for the maximum stress calculation (optional).</span>
<span class="sd">    :type maxStressIdentifier: str</span>
<span class="sd">    :param allCombos: List of load combinations (optional, default is empty list).</span>
<span class="sd">    :type allCombos: list of str</span>
<span class="sd">    :return: Four dataframes containing stress information (Tensile, Compressive, Bending, Shear) and two lists of maximum Tensile+Bending stress and maximum Compressive+Bending stress.</span>
<span class="sd">    :rtype: tuple</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Steps</span>
    <span class="c1"># 1. Get all or selected frame/wall members</span>
    <span class="c1"># 2. Get section props of individual memebers</span>
    <span class="c1"># 3. Get forces in members (i.e. tension, compression and bendings)</span>
    <span class="c1"># 4. convert forces to stress, including bending stress</span>
    <span class="c1"># 5. Output &quot;max stress, member type, member name&quot;</span>

    <span class="n">SapModel</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">SapModel</span>

    <span class="c1"># Set units to millimetres</span>
    <span class="n">SapModel</span><span class="o">.</span><span class="n">SetPresentUnits</span><span class="p">(</span><span class="n">SAP2000Constants</span><span class="o">.</span><span class="n">Units</span><span class="p">[</span><span class="s1">&#39;N_mm_C&#39;</span><span class="p">])</span>

    <span class="c1"># Initialize dictTemplate to keep track of Stress, Member Type, Load Case and Member Name</span>
    <span class="n">dictTemplate</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;Stress&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">],</span>
        <span class="s1">&#39;Type&#39;</span><span class="p">:</span> <span class="p">[</span><span class="kc">None</span><span class="p">],</span> <span class="c1"># &#39;F&#39;: Frame; &#39;W&#39;: Wall</span>
        <span class="s1">&#39;LC&#39;</span><span class="p">:</span> <span class="p">[</span><span class="kc">None</span><span class="p">],</span>
        <span class="s1">&#39;Name&#39;</span><span class="p">:</span> <span class="p">[</span><span class="kc">None</span><span class="p">],</span>
    <span class="p">}</span>
    <span class="c1"># Initialize variables to keep track of maximum Tension, Compression, Bending and Shear</span>
    <span class="n">maxTs</span><span class="p">,</span> <span class="n">maxCs</span><span class="p">,</span> <span class="n">maxMs</span><span class="p">,</span> <span class="n">maxVs</span> <span class="o">=</span> <span class="p">[</span><span class="n">dictTemplate</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">)]</span>

    <span class="n">maxTwBs</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">maxCwBs</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span>

    <span class="c1"># Frame members ------------------------</span>
    <span class="k">if</span> <span class="n">selectedFrameMembers</span> <span class="o">==</span> <span class="p">[]:</span>
        <span class="p">[</span><span class="n">numberNames</span><span class="p">,</span> <span class="n">allNames</span><span class="p">,</span> <span class="n">ret</span><span class="p">]</span> <span class="o">=</span> <span class="n">SapModel</span><span class="o">.</span><span class="n">FrameObj</span><span class="o">.</span><span class="n">GetNameList</span><span class="p">()</span>
        <span class="n">selectedFrameMembers</span> <span class="o">=</span> <span class="n">allNames</span>

    <span class="k">for</span> <span class="n">combo</span> <span class="ow">in</span> <span class="n">allCombos</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span><span class="p">(</span><span class="n">maxStressIdentifier</span> <span class="ow">in</span> <span class="n">combo</span><span class="p">):</span>
            <span class="k">continue</span>

        <span class="n">SapModel</span><span class="o">.</span><span class="n">Results</span><span class="o">.</span><span class="n">Setup</span><span class="o">.</span><span class="n">DeselectAllCasesAndCombosForOutput</span><span class="p">()</span>
        <span class="n">SapModel</span><span class="o">.</span><span class="n">Results</span><span class="o">.</span><span class="n">Setup</span><span class="o">.</span><span class="n">SetComboSelectedForOutput</span><span class="p">(</span><span class="n">combo</span><span class="p">)</span>
        <span class="c1"># set type to envelope</span>
        <span class="n">SapModel</span><span class="o">.</span><span class="n">Results</span><span class="o">.</span><span class="n">Setup</span><span class="o">.</span><span class="n">SetOptionModalHist</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">member</span> <span class="ow">in</span> <span class="n">selectedFrameMembers</span><span class="p">:</span>
            <span class="c1"># Get section props of memebers</span>
            <span class="p">[</span><span class="n">sectName</span><span class="p">,</span> <span class="n">sAuto</span> <span class="p">,</span> <span class="n">ret</span><span class="p">]</span> <span class="o">=</span> <span class="n">SapModel</span><span class="o">.</span><span class="n">FrameObj</span><span class="o">.</span><span class="n">GetSection</span><span class="p">(</span><span class="n">member</span><span class="p">)</span>
            <span class="p">[</span><span class="n">Area</span><span class="p">,</span> <span class="n">As2</span><span class="p">,</span> <span class="n">As3</span><span class="p">,</span> <span class="n">Torsion</span><span class="p">,</span> <span class="n">I22</span><span class="p">,</span> <span class="n">I33</span><span class="p">,</span> <span class="n">S22</span><span class="p">,</span> <span class="n">S33</span><span class="p">,</span> <span class="n">Z22</span><span class="p">,</span> <span class="n">Z33</span><span class="p">,</span> <span class="n">R22</span><span class="p">,</span> <span class="n">R33</span><span class="p">,</span> <span class="n">ret</span><span class="p">]</span> <span class="o">=</span> <span class="n">SapModel</span><span class="o">.</span><span class="n">PropFrame</span><span class="o">.</span><span class="n">GetSectProps</span><span class="p">(</span><span class="n">sectName</span><span class="p">)</span>
            <span class="c1"># Note: As2 and As3 refer to the reduced effective shear areas. This to reflect the parabolic distribution of shear stress in the section. Assume SAP2000 is correct</span>

            <span class="c1"># Get forces in members (i.e. tension, compression and bendings)</span>
            <span class="n">OBJECT_ELEM</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="p">[</span><span class="n">NumberResults</span><span class="p">,</span> <span class="n">Obj</span><span class="p">,</span> <span class="n">ObjSta</span><span class="p">,</span> <span class="n">Elm</span><span class="p">,</span> <span class="n">ElmSta</span><span class="p">,</span> <span class="n">LoadCase</span><span class="p">,</span> <span class="n">StepType</span><span class="p">,</span> <span class="n">StepNum</span><span class="p">,</span> <span class="n">P</span><span class="p">,</span> <span class="n">V2</span><span class="p">,</span> <span class="n">V3</span><span class="p">,</span> <span class="n">T</span><span class="p">,</span> <span class="n">M2</span><span class="p">,</span> <span class="n">M3</span><span class="p">,</span> <span class="n">ret</span><span class="p">]</span> <span class="o">=</span> <span class="n">SapModel</span><span class="o">.</span><span class="n">Results</span><span class="o">.</span><span class="n">FrameForce</span><span class="p">(</span><span class="n">member</span><span class="p">,</span> <span class="n">OBJECT_ELEM</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Load Case:&#39;</span><span class="p">,</span> <span class="n">LoadCase</span><span class="p">)</span>

            <span class="c1"># in case no forces found</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">LoadCase</span><span class="p">:</span>
                <span class="k">continue</span>

            <span class="c1"># Max Tensile Stress</span>
            <span class="n">maxT</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">P</span><span class="p">)</span>
            <span class="n">maxTStress</span> <span class="o">=</span> <span class="n">maxT</span> <span class="o">/</span> <span class="n">Area</span>

            <span class="n">maxTs</span><span class="p">[</span><span class="s1">&#39;Stress&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">maxTStress</span><span class="p">)</span>
            <span class="n">maxTs</span><span class="p">[</span><span class="s1">&#39;Type&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;F&#39;</span><span class="p">)</span>
            <span class="n">maxTs</span><span class="p">[</span><span class="s1">&#39;LC&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">combo</span><span class="p">)</span>
            <span class="n">maxTs</span><span class="p">[</span><span class="s1">&#39;Name&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">member</span><span class="p">)</span>

            <span class="c1"># Max Compressive Stress</span>
            <span class="n">maxC</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">P</span><span class="p">)</span>
            <span class="n">maxCStress</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">maxC</span><span class="p">)</span> <span class="o">/</span> <span class="n">Area</span>

            <span class="n">maxCs</span><span class="p">[</span><span class="s1">&#39;Stress&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">maxCStress</span><span class="p">)</span>
            <span class="n">maxCs</span><span class="p">[</span><span class="s1">&#39;Type&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;F&#39;</span><span class="p">)</span>
            <span class="n">maxCs</span><span class="p">[</span><span class="s1">&#39;LC&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">combo</span><span class="p">)</span>
            <span class="n">maxCs</span><span class="p">[</span><span class="s1">&#39;Name&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">member</span><span class="p">)</span>

            <span class="c1"># Max Bending Stress - major and minor bending axes</span>
            <span class="n">maxM2pos</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">M2</span><span class="p">)</span>
            <span class="n">maxM2neg</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">M2</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">maxM2pos</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">maxM2neg</span><span class="p">):</span>
                <span class="n">maxM2Stress</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">maxM2pos</span><span class="p">)</span> <span class="o">/</span> <span class="n">S22</span> <span class="c1"># Bending Stress = Bending / Section Modulus of Bending</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">maxM2Stress</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">maxM2neg</span><span class="p">)</span> <span class="o">/</span> <span class="n">S22</span>

            <span class="n">maxM3pos</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">M3</span><span class="p">)</span>
            <span class="n">maxM3neg</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">M3</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">maxM3pos</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">maxM3neg</span><span class="p">):</span>
                <span class="n">maxM3Stress</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">maxM3pos</span><span class="p">)</span> <span class="o">/</span> <span class="n">S33</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">maxM3Stress</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">maxM3neg</span><span class="p">)</span> <span class="o">/</span> <span class="n">S33</span>

            <span class="c1"># Find maximum bending stress between the bending stresses about the 2 local axes</span>
            <span class="k">if</span> <span class="n">maxM2Stress</span> <span class="o">&gt;=</span> <span class="n">maxM3Stress</span><span class="p">:</span>
                <span class="n">maxMStress</span> <span class="o">=</span> <span class="n">maxM2Stress</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">maxMStress</span> <span class="o">=</span> <span class="n">maxM3Stress</span>

            <span class="n">maxMs</span><span class="p">[</span><span class="s1">&#39;Stress&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">maxMStress</span><span class="p">)</span>
            <span class="n">maxMs</span><span class="p">[</span><span class="s1">&#39;Type&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;F&#39;</span><span class="p">)</span>
            <span class="n">maxMs</span><span class="p">[</span><span class="s1">&#39;LC&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">combo</span><span class="p">)</span>
            <span class="n">maxMs</span><span class="p">[</span><span class="s1">&#39;Name&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">member</span><span class="p">)</span>

            <span class="c1"># Max shear stress - major and minor local axes</span>
            <span class="n">maxV2pos</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">V2</span><span class="p">)</span>
            <span class="n">maxV2neg</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">V2</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">maxV2pos</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">maxV2neg</span><span class="p">):</span>
                <span class="n">maxV2stress</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">maxV2pos</span><span class="p">)</span> <span class="o">/</span> <span class="n">As2</span> <span class="c1"># Shear Stress = Shear Force / Shear Area</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">maxV2stress</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">maxV2neg</span><span class="p">)</span> <span class="o">/</span> <span class="n">As2</span>

            <span class="n">maxV3pos</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">V3</span><span class="p">)</span>
            <span class="n">maxV3neg</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">V3</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">maxV3pos</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">maxV3neg</span><span class="p">):</span>
                <span class="n">maxV3stress</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">maxV3pos</span><span class="p">)</span> <span class="o">/</span> <span class="n">As3</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">maxV3stress</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">maxV3neg</span><span class="p">)</span> <span class="o">/</span> <span class="n">As3</span>

            <span class="c1"># Find the maximum shear stress between the shear stresses along the 2 local axes (Optional)</span>
            <span class="k">if</span> <span class="n">maxV2stress</span> <span class="o">&gt;=</span> <span class="n">maxV3stress</span><span class="p">:</span>
                <span class="n">maxVStress</span> <span class="o">=</span> <span class="n">maxV2stress</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">maxVStress</span> <span class="o">=</span> <span class="n">maxV3stress</span>

            <span class="n">maxVs</span><span class="p">[</span><span class="s1">&#39;Stress&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">maxVStress</span><span class="p">)</span>
            <span class="n">maxVs</span><span class="p">[</span><span class="s1">&#39;Type&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;F&#39;</span><span class="p">)</span>
            <span class="n">maxVs</span><span class="p">[</span><span class="s1">&#39;LC&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">combo</span><span class="p">)</span>
            <span class="n">maxVs</span><span class="p">[</span><span class="s1">&#39;Name&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">member</span><span class="p">)</span>

            <span class="n">maxTwBs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">maxTStress</span> <span class="o">+</span> <span class="n">maxMStress</span><span class="p">)</span>
            <span class="n">maxCwBs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">maxCStress</span> <span class="o">+</span> <span class="n">maxMStress</span><span class="p">)</span>

    <span class="c1"># Return 4 dataframes</span>
    <span class="n">maxTs_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">maxTs</span><span class="p">)</span>
    <span class="n">maxCs_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">maxCs</span><span class="p">)</span>
    <span class="n">maxMs_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">maxMs</span><span class="p">)</span>
    <span class="n">maxVs_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">maxVs</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">maxTs_df</span><span class="p">,</span> <span class="n">maxCs_df</span><span class="p">,</span> <span class="n">maxMs_df</span><span class="p">,</span> <span class="n">maxVs_df</span><span class="p">,</span> <span class="n">maxTwBs</span><span class="p">,</span> <span class="n">maxCwBs</span>
</pre></div>
</div>
</section>
<section id="getcosts">
<h3>getCosts<a class="headerlink" href="#getcosts" title="Permalink to this heading">#</a></h3>
<p>This method is used to estimate the annual building cost and the annual maintenance cost.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">getCosts</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">maxAcc</span><span class="p">,</span> <span class="n">maxDisp</span><span class="p">,</span> <span class="n">footprint</span><span class="p">,</span> <span class="n">weight</span><span class="p">,</span> <span class="n">totalMass</span><span class="p">,</span> <span class="n">totalHeight</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Calculate the annual building and seismic costs.</span>

<span class="sd">    This method calculates the annual building cost and annual seismic cost based on various parameters,</span>
<span class="sd">    including maximum acceleration, maximum displacement, footprint, weight, total mass, and total height.</span>

<span class="sd">    :param maxAcc: The maximum acceleration in g units.</span>
<span class="sd">    :type maxAcc: float</span>
<span class="sd">    :param maxDisp: The maximum displacement in millimeters.</span>
<span class="sd">    :type maxDisp: float</span>
<span class="sd">    :param footprint: The footprint of the structure.</span>
<span class="sd">    :type footprint: float</span>
<span class="sd">    :param weight: The weight of the structure in pounds.</span>
<span class="sd">    :type weight: float</span>
<span class="sd">    :param totalMass: The total mass of the structure.</span>
<span class="sd">    :type totalMass: float</span>
<span class="sd">    :param totalHeight: The total height of the structure in millimeters.</span>
<span class="sd">    :type totalHeight: float</span>
<span class="sd">    :return: A tuple containing the annual building cost and annual seismic cost (float, float).</span>
<span class="sd">    :rtype: tuple</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Subtract weights. Weight is initially in lb, convert to kg</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Calculating costs...&#39;</span><span class="p">)</span>

    <span class="n">weight</span> <span class="o">=</span> <span class="nb">max</span><span class="p">((</span><span class="n">weight</span> <span class="o">*</span> <span class="n">UnitConversion</span><span class="o">.</span><span class="n">Mass</span><span class="p">[</span><span class="s1">&#39;lb&#39;</span><span class="p">]</span> <span class="o">-</span> <span class="n">totalMass</span><span class="p">)</span> <span class="o">/</span> <span class="n">UnitConversion</span><span class="o">.</span><span class="n">Mass</span><span class="p">[</span><span class="s1">&#39;lb&#39;</span><span class="p">],</span> <span class="mi">0</span><span class="p">)</span>   <span class="c1"># weight must be greater than 0</span>
    <span class="n">design_life</span> <span class="o">=</span> <span class="mi">100</span> <span class="c1"># years</span>
    <span class="n">construction_cost</span> <span class="o">=</span> <span class="mi">2000000</span><span class="o">*</span><span class="p">(</span><span class="n">weight</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span><span class="o">+</span><span class="mi">6</span><span class="o">*</span><span class="p">(</span><span class="mi">10</span><span class="o">**</span><span class="mi">6</span><span class="p">)</span>
    <span class="n">land_cost</span> <span class="o">=</span> <span class="mi">35000</span> <span class="o">*</span> <span class="n">footprint</span>
    <span class="n">annual_building_cost</span> <span class="o">=</span> <span class="p">(</span><span class="n">land_cost</span> <span class="o">+</span> <span class="n">construction_cost</span><span class="p">)</span> <span class="o">/</span> <span class="n">design_life</span>

    <span class="n">equipment_cost</span> <span class="o">=</span> <span class="mi">15000000</span>
    <span class="n">return_period_1</span> <span class="o">=</span> <span class="mi">50</span>
    <span class="n">return_period_2</span> <span class="o">=</span> <span class="mi">300</span>
    <span class="n">apeak_1</span> <span class="o">=</span> <span class="n">maxAcc</span> <span class="c1"># in units of g</span>
    <span class="n">xpeak_1</span> <span class="o">=</span> <span class="mi">100</span><span class="o">*</span><span class="n">maxDisp</span><span class="o">/</span><span class="p">(</span><span class="n">totalHeight</span> <span class="o">*</span> <span class="mf">25.4</span><span class="p">)</span> <span class="c1"># % roof drift</span>
    <span class="n">structural_damage_1</span> <span class="o">=</span> <span class="n">scipy</span><span class="o">.</span><span class="n">stats</span><span class="o">.</span><span class="n">norm</span><span class="p">(</span><span class="mf">1.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">)</span><span class="o">.</span><span class="n">cdf</span><span class="p">(</span><span class="n">xpeak_1</span><span class="p">)</span> <span class="c1"># CDF of a standard normal distribution with Mean = 1.5 and S.D. = 0.5</span>
    <span class="n">equipment_damage_1</span> <span class="o">=</span> <span class="n">scipy</span><span class="o">.</span><span class="n">stats</span><span class="o">.</span><span class="n">norm</span><span class="p">(</span><span class="mf">1.75</span><span class="p">,</span> <span class="mf">0.7</span><span class="p">)</span><span class="o">.</span><span class="n">cdf</span><span class="p">(</span><span class="n">apeak_1</span><span class="p">)</span>
    <span class="n">economic_loss_1</span> <span class="o">=</span> <span class="n">structural_damage_1</span><span class="o">*</span><span class="n">construction_cost</span> <span class="o">+</span> <span class="n">equipment_damage_1</span><span class="o">*</span><span class="n">equipment_cost</span>
    <span class="n">annual_economic_loss_1</span> <span class="o">=</span> <span class="n">economic_loss_1</span><span class="o">/</span><span class="n">return_period_1</span>
    <span class="n">structural_damage_2</span> <span class="o">=</span> <span class="mf">0.5</span>
    <span class="n">equipment_damage_2</span> <span class="o">=</span> <span class="mf">0.5</span>
    <span class="n">economic_loss_2</span> <span class="o">=</span> <span class="n">structural_damage_2</span><span class="o">*</span><span class="n">construction_cost</span> <span class="o">+</span> <span class="n">equipment_damage_2</span><span class="o">*</span><span class="n">equipment_cost</span>
    <span class="n">annual_economic_loss_2</span> <span class="o">=</span> <span class="n">economic_loss_2</span><span class="o">/</span><span class="n">return_period_2</span>
    <span class="n">annual_seismic_cost</span> <span class="o">=</span> <span class="n">annual_economic_loss_1</span> <span class="o">+</span> <span class="n">annual_economic_loss_2</span>

    <span class="k">return</span> <span class="n">annual_building_cost</span><span class="p">,</span> <span class="n">annual_seismic_cost</span>
</pre></div>
</div>
</section>
<section id="getcr">
<h3>getCR<a class="headerlink" href="#getcr" title="Permalink to this heading">#</a></h3>
<p>This method finds the centre of rigidity for each floor of the structure.
#. Unlock the model
#. Set units to inches
#. Get the names of the nodes of each floor
#. Remove any constraints assigned to the nodes
#. Define and assign diaphram constraints to the nodes of each floor
#. Retrieve the names of all load patterns and add in the unit load cases
#. Set only unit load cases to run, add unit loads to each floor and run analysis
#. Select each of the unit load cases
#. Find the rotation about the local 3 axis for all nodes at each floor but the ground
#. Calculate the X and Y coordinates of the Centre of Rigidity
#. Unlock the model
#. Remove unit loads and remove diaphram constraint from the nodes of each floor
#. Set all cases but the unit load cases to run</p>
<p>The method <em>DeleteConstraint(node, 0)</em> removes any constraint assignments to the node.
The method <em>SetDiaphragm(diaphragmType, 3)</em> defines a diaphram constraint orthogonal to the Z axis.
The method <em>SetConstraint(node, diaphragmType, 0, True)</em> sets the diaphram constraint for each node. Any previous constraints will be replaced.
The method
All the methods each return zero if each of them are successful, otherwise they return a nonzero value.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">getCR</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">towerElevs</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Calculate and return the Centre of Rigidity for each floor in a tower.</span>

<span class="sd">    :param towerElevs: List of elevation levels for tower floors.</span>
<span class="sd">    :type towerElevs: list of float</span>
<span class="sd">    :return: Dictionary containing CR for each floor at the specified elevations.</span>
<span class="sd">    :rtype: dict</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># TODO: implement all floor CR</span>
    <span class="n">SapModel</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">SapModel</span>
    <span class="n">SapModel</span><span class="o">.</span><span class="n">SetModelIsLocked</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">SapModel</span><span class="o">.</span><span class="n">SetPresentUnits</span><span class="p">(</span><span class="n">SAP2000Constants</span><span class="o">.</span><span class="n">Units</span><span class="p">[</span><span class="s1">&#39;kip_in_F&#39;</span><span class="p">])</span>
    <span class="n">towerCRs</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="c1"># Get names of nodes on each floor</span>
    <span class="p">[</span><span class="n">number_nodes</span><span class="p">,</span> <span class="n">all_node_names</span><span class="p">,</span> <span class="n">ret</span><span class="p">]</span> <span class="o">=</span> <span class="n">SapModel</span><span class="o">.</span><span class="n">PointObj</span><span class="o">.</span><span class="n">GetNameList</span><span class="p">()</span>
    <span class="n">floor_nodes</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">node_name</span> <span class="ow">in</span> <span class="n">all_node_names</span><span class="p">:</span>
        <span class="p">[</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span> <span class="n">ret</span><span class="p">]</span> <span class="o">=</span> <span class="n">SapModel</span><span class="o">.</span><span class="n">PointObj</span><span class="o">.</span><span class="n">GetCoordCartesian</span><span class="p">(</span><span class="n">node_name</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">z</span> <span class="ow">in</span> <span class="n">towerElevs</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">z</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">floor_nodes</span><span class="p">:</span>
                <span class="n">floor_nodes</span><span class="p">[</span><span class="n">z</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">floor_nodes</span><span class="p">[</span><span class="n">z</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">node_name</span><span class="p">)</span>

    <span class="c1"># remove existing diaphragm constraints</span>
    <span class="k">for</span> <span class="n">elev</span> <span class="ow">in</span> <span class="n">floor_nodes</span><span class="p">:</span>
        <span class="n">nodes</span> <span class="o">=</span> <span class="n">floor_nodes</span><span class="p">[</span><span class="n">elev</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="n">nodes</span><span class="p">:</span>
            <span class="n">ret</span> <span class="o">=</span> <span class="n">SapModel</span><span class="o">.</span><span class="n">PointObj</span><span class="o">.</span><span class="n">DeleteConstraint</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">ret</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;ERROR deleting diaphragm constraint from floor at elevation &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">elev</span><span class="p">))</span>

    <span class="c1"># Define and set diaphragm constraint if not defined already</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Defining and Setting diaphragm constraint...&#39;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">elev</span> <span class="ow">in</span> <span class="n">towerElevs</span><span class="p">:</span>
        <span class="n">diaphragmType</span> <span class="o">=</span> <span class="s1">&#39;Diaphragm&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">elev</span><span class="p">)</span>
        <span class="p">[</span><span class="n">axis</span><span class="p">,</span> <span class="n">csys</span><span class="p">,</span> <span class="n">ret</span><span class="p">]</span> <span class="o">=</span> <span class="n">SapModel</span><span class="o">.</span><span class="n">ConstraintDef</span><span class="o">.</span><span class="n">GetDiaphragm</span><span class="p">(</span><span class="n">diaphragmType</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">ret</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">SapModel</span><span class="o">.</span><span class="n">ConstraintDef</span><span class="o">.</span><span class="n">SetDiaphragm</span><span class="p">(</span><span class="n">diaphragmType</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>

        <span class="n">nodes</span> <span class="o">=</span> <span class="n">floor_nodes</span><span class="p">[</span><span class="n">elev</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="n">nodes</span><span class="p">:</span>
            <span class="n">ret</span> <span class="o">=</span> <span class="n">SapModel</span><span class="o">.</span><span class="n">PointObj</span><span class="o">.</span><span class="n">SetConstraint</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">diaphragmType</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">ret</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;ERROR setting diaphragm constraint from floor at elevation &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">elev</span><span class="p">))</span>


    <span class="c1"># Create unit X, unit Y, and unit Z load cases if they haven&#39;t already been set</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Defining unit load cases...&#39;</span><span class="p">)</span>
    <span class="c1"># Retrieve the names of all load patterns</span>
    <span class="p">[</span><span class="n">number_patterns</span><span class="p">,</span> <span class="n">all_load_patterns</span><span class="p">,</span> <span class="n">ret</span><span class="p">]</span> <span class="o">=</span> <span class="n">SapModel</span><span class="o">.</span><span class="n">LoadPatterns</span><span class="o">.</span><span class="n">GetNameList</span><span class="p">()</span>
    <span class="n">LTYPE_DEAD</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">unitLoadPatterns</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;Unit X&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
        <span class="s1">&#39;Unit Y&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
        <span class="s1">&#39;Unit Moment&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]}</span>

    <span class="k">for</span> <span class="n">unitLoadPattern</span> <span class="ow">in</span> <span class="n">unitLoadPatterns</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">elev</span> <span class="ow">in</span> <span class="n">towerElevs</span><span class="p">:</span>
            <span class="n">loadCaseName</span> <span class="o">=</span> <span class="n">unitLoadPattern</span> <span class="o">+</span> <span class="s1">&#39; - &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">elev</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">loadCaseName</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">all_load_patterns</span><span class="p">:</span>
                <span class="n">ret</span> <span class="o">=</span> <span class="n">SapModel</span><span class="o">.</span><span class="n">LoadPatterns</span><span class="o">.</span><span class="n">Add</span><span class="p">(</span><span class="n">loadCaseName</span><span class="p">,</span> <span class="n">LTYPE_DEAD</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">ret</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;ERROR adding &#39;</span> <span class="o">+</span> <span class="n">loadCaseName</span> <span class="o">+</span> <span class="s1">&#39; load case&#39;</span><span class="p">)</span>

    <span class="c1"># Set all unit load cases to run</span>
    <span class="n">SapModel</span><span class="o">.</span><span class="n">Analyze</span><span class="o">.</span><span class="n">SetRunCaseFlag</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
    <span class="c1"># Set only unit load cases to run</span>
    <span class="k">for</span> <span class="n">unitLoadPattern</span> <span class="ow">in</span> <span class="n">unitLoadPatterns</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">elev</span> <span class="ow">in</span> <span class="n">towerElevs</span><span class="p">:</span>
            <span class="n">SapModel</span><span class="o">.</span><span class="n">Analyze</span><span class="o">.</span><span class="n">SetRunCaseFlag</span><span class="p">(</span><span class="n">unitLoadPattern</span> <span class="o">+</span> <span class="s1">&#39; - &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">elev</span><span class="p">),</span> <span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>

    <span class="c1"># Add loads to all floors</span>
    <span class="n">nodeNum</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">elev</span> <span class="ow">in</span> <span class="n">towerElevs</span><span class="p">:</span>
        <span class="n">node</span> <span class="o">=</span> <span class="n">floor_nodes</span><span class="p">[</span><span class="n">elev</span><span class="p">][</span><span class="n">nodeNum</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">unitLoadPattern</span> <span class="ow">in</span> <span class="n">unitLoadPatterns</span><span class="p">:</span>
            <span class="n">loadCaseName</span> <span class="o">=</span> <span class="n">unitLoadPattern</span> <span class="o">+</span> <span class="s1">&#39; - &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">elev</span><span class="p">)</span>
            <span class="n">SapModel</span><span class="o">.</span><span class="n">PointObj</span><span class="o">.</span><span class="n">SetLoadForce</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">loadCaseName</span><span class="p">,</span> <span class="n">unitLoadPatterns</span><span class="p">[</span><span class="n">unitLoadPattern</span><span class="p">],</span> <span class="kc">True</span><span class="p">,</span> <span class="s1">&#39;GLOBAL&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

    <span class="c1"># Run analysis -----------------------------------------------------------------------------------------------</span>
    <span class="nb">print</span><span class="p">()</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Running model in SAP2000...&#39;</span><span class="p">)</span>
    <span class="n">SapModel</span><span class="o">.</span><span class="n">Analyze</span><span class="o">.</span><span class="n">RunAnalysis</span><span class="p">()</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Finished running.&#39;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">()</span>

    <span class="c1"># For each floor, assign unit loads, run case, find rotations, find Crx and Cry</span>
    <span class="k">for</span> <span class="n">elev</span> <span class="ow">in</span> <span class="n">towerElevs</span><span class="p">:</span>
        <span class="c1"># skip elevation 0</span>
        <span class="k">if</span> <span class="n">elev</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">continue</span>

        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Calculating Cr...&#39;</span><span class="p">)</span>

        <span class="n">node</span> <span class="o">=</span> <span class="n">floor_nodes</span><span class="p">[</span><span class="n">elev</span><span class="p">][</span><span class="n">nodeNum</span><span class="p">]</span>

        <span class="c1"># Get rotations at joint</span>
        <span class="n">rotations</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">patternName</span> <span class="ow">in</span> <span class="n">unitLoadPatterns</span><span class="p">:</span>
            <span class="n">SapModel</span><span class="o">.</span><span class="n">Results</span><span class="o">.</span><span class="n">Setup</span><span class="o">.</span><span class="n">DeselectAllCasesAndCombosForOutput</span><span class="p">()</span>
            <span class="n">SapModel</span><span class="o">.</span><span class="n">Results</span><span class="o">.</span><span class="n">Setup</span><span class="o">.</span><span class="n">SetCaseSelectedForOutput</span><span class="p">(</span><span class="n">patternName</span> <span class="o">+</span> <span class="s1">&#39; - &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">elev</span><span class="p">),</span> <span class="kc">True</span><span class="p">)</span>

            <span class="n">OBJECT_ELEM</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">number_results</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">object_names</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">element_names</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">load_cases</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">step_types</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">step_nums</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">u1</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">u2</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">u3</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">r1</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">r2</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">r3</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">ret</span> <span class="o">=</span> <span class="mi">0</span>

            <span class="p">[</span><span class="n">number_results</span><span class="p">,</span> <span class="n">object_names</span><span class="p">,</span> <span class="n">element_names</span><span class="p">,</span> <span class="n">load_cases</span><span class="p">,</span> <span class="n">step_types</span><span class="p">,</span> <span class="n">step_nums</span><span class="p">,</span> <span class="n">u1</span><span class="p">,</span> <span class="n">u2</span><span class="p">,</span> <span class="n">u3</span><span class="p">,</span> <span class="n">r1</span><span class="p">,</span> <span class="n">r2</span><span class="p">,</span> <span class="n">r3</span><span class="p">,</span> <span class="n">ret</span><span class="p">]</span> <span class="o">=</span> <span class="n">SapModel</span><span class="o">.</span><span class="n">Results</span><span class="o">.</span><span class="n">JointDisplAbs</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">OBJECT_ELEM</span><span class="p">,</span> <span class="n">number_results</span><span class="p">,</span> <span class="n">object_names</span><span class="p">,</span> <span class="n">element_names</span><span class="p">,</span> <span class="n">load_cases</span><span class="p">,</span> <span class="n">step_types</span><span class="p">,</span> <span class="n">step_nums</span><span class="p">,</span> <span class="n">u1</span><span class="p">,</span> <span class="n">u2</span><span class="p">,</span> <span class="n">u3</span><span class="p">,</span> <span class="n">r1</span><span class="p">,</span> <span class="n">r2</span><span class="p">,</span> <span class="n">r3</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">ret</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;ERROR getting rotations from &#39;</span> <span class="o">+</span> <span class="n">patternName</span> <span class="o">+</span> <span class="s1">&#39; - &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">elev</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39; case&#39;</span><span class="p">)</span>
            <span class="n">rotations</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">r3</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

        <span class="n">Rzx</span><span class="p">,</span> <span class="n">Rzy</span><span class="p">,</span> <span class="n">Rzz</span> <span class="o">=</span> <span class="n">rotations</span>

        <span class="p">[</span><span class="n">load_x</span><span class="p">,</span> <span class="n">load_y</span><span class="p">,</span> <span class="n">load_z</span><span class="p">,</span> <span class="n">ret</span><span class="p">]</span> <span class="o">=</span> <span class="n">SapModel</span><span class="o">.</span><span class="n">PointObj</span><span class="o">.</span><span class="n">GetCoordCartesian</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">Crx</span> <span class="o">=</span> <span class="n">load_x</span> <span class="o">-</span> <span class="n">Rzy</span><span class="o">/</span> <span class="p">(</span><span class="n">Rzz</span> <span class="o">+</span> <span class="n">Algebra</span><span class="o">.</span><span class="n">EPSILON</span><span class="p">)</span>
        <span class="n">Cry</span> <span class="o">=</span> <span class="n">load_y</span> <span class="o">+</span> <span class="n">Rzx</span><span class="o">/</span> <span class="p">(</span><span class="n">Rzz</span> <span class="o">+</span> <span class="n">Algebra</span><span class="o">.</span><span class="n">EPSILON</span><span class="p">)</span>
        <span class="n">floorCR</span> <span class="o">=</span> <span class="p">[</span><span class="n">Crx</span><span class="p">,</span> <span class="n">Cry</span><span class="p">]</span>
        <span class="c1"># Append results</span>
        <span class="n">towerCRs</span><span class="p">[</span><span class="n">elev</span><span class="p">]</span> <span class="o">=</span> <span class="n">floorCR</span>

    <span class="c1"># Unlock model</span>
    <span class="n">SapModel</span><span class="o">.</span><span class="n">SetModelIsLocked</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">elev</span> <span class="ow">in</span> <span class="n">towerElevs</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Deleting unit loads and constraints...&#39;</span><span class="p">)</span>
        <span class="n">node</span> <span class="o">=</span> <span class="n">floor_nodes</span><span class="p">[</span><span class="n">elev</span><span class="p">][</span><span class="n">nodeNum</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">patternName</span> <span class="ow">in</span> <span class="n">unitLoadPatterns</span><span class="p">:</span>
            <span class="c1"># Delete unit loads</span>
            <span class="n">ret</span> <span class="o">=</span> <span class="n">SapModel</span><span class="o">.</span><span class="n">PointObj</span><span class="o">.</span><span class="n">DeleteLoadForce</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">patternName</span> <span class="o">+</span> <span class="s1">&#39; - &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">elev</span><span class="p">),</span> <span class="mi">0</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">ret</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;ERROR deleting&#39;</span> <span class="o">+</span> <span class="n">patternName</span> <span class="o">+</span> <span class="s1">&#39; on floor at elevation &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">elev</span><span class="p">))</span>

        <span class="n">nodes</span> <span class="o">=</span> <span class="n">floor_nodes</span><span class="p">[</span><span class="n">elev</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="n">nodes</span><span class="p">:</span>
            <span class="c1"># Delete diaphragm constraint from floor</span>
            <span class="n">ret</span> <span class="o">=</span> <span class="n">SapModel</span><span class="o">.</span><span class="n">PointObj</span><span class="o">.</span><span class="n">DeleteConstraint</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">ret</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;ERROR deleting diaphragm constraint from floor at elevation &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">elev</span><span class="p">))</span>

    <span class="c1"># Set all load cases to run again, except for the unit load cases</span>
    <span class="n">SapModel</span><span class="o">.</span><span class="n">Analyze</span><span class="o">.</span><span class="n">SetRunCaseFlag</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">patternName</span> <span class="ow">in</span> <span class="n">unitLoadPatterns</span><span class="p">:</span>
        <span class="n">SapModel</span><span class="o">.</span><span class="n">Analyze</span><span class="o">.</span><span class="n">SetRunCaseFlag</span><span class="p">(</span><span class="n">patternName</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">towerCRs</span>
</pre></div>
</div>
</section>
<section id="geteccentricity">
<h3>getEccentricity<a class="headerlink" href="#geteccentricity" title="Permalink to this heading">#</a></h3>
<p>This method calculates the maximum and average eccentricity of the tower.
#. Calculate for each floor, the difference between the X or Y coordinates of centre of regidity and the centre of mass to find the eccentricity of the structure.
#. Find the maximum and average value for eccentricty.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">getEccentricity</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">towerCRs</span><span class="p">,</span> <span class="n">tower</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Calculate the maximum and average eccentricity for a structure.</span>

<span class="sd">    This method calculates and returns the maximum and average eccentricity for a tower based on CR (Center of Rotation)</span>
<span class="sd">    values and the center of mass of each floor.</span>

<span class="sd">    :param towerCRs: Dictionary containing CR (Center of Rotation) for each floor at specified elevations.</span>
<span class="sd">    :type towerCRs: dict</span>
<span class="sd">    :param tower: Tower object containing floor information.</span>
<span class="sd">    :type tower: Tower</span>
<span class="sd">    :return: Maximum and average eccentricity (X and Y) values.</span>
<span class="sd">    :rtype: tuple</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">eccs</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">for</span> <span class="n">elev</span> <span class="ow">in</span> <span class="n">towerCRs</span><span class="p">:</span>
        <span class="n">crX</span><span class="p">,</span> <span class="n">crY</span> <span class="o">=</span> <span class="n">towerCRs</span><span class="p">[</span><span class="n">elev</span><span class="p">]</span>
        <span class="n">comX</span> <span class="o">=</span> <span class="n">tower</span><span class="o">.</span><span class="n">floors</span><span class="p">[</span><span class="n">elev</span><span class="p">]</span><span class="o">.</span><span class="n">comX</span>
        <span class="n">comY</span> <span class="o">=</span> <span class="n">tower</span><span class="o">.</span><span class="n">floors</span><span class="p">[</span><span class="n">elev</span><span class="p">]</span><span class="o">.</span><span class="n">comY</span>

        <span class="n">xEcc</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">crX</span> <span class="o">-</span> <span class="n">comX</span><span class="p">)</span>
        <span class="n">yEcc</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">crY</span> <span class="o">-</span> <span class="n">comY</span><span class="p">)</span>

        <span class="n">eccs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">xEcc</span><span class="p">)</span>
        <span class="n">eccs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">yEcc</span><span class="p">)</span>

    <span class="n">maxEcc</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">eccs</span><span class="p">)</span>
    <span class="n">avgEcc</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">eccs</span><span class="p">)</span><span class="o">/</span><span class="nb">max</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">eccs</span><span class="p">),</span><span class="mi">1</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">maxEcc</span><span class="p">,</span> <span class="n">avgEcc</span>
</pre></div>
</div>
</section>
</section>
<section id="tower-performance">
<span id="towerperformance"></span><h2>Tower Performance<a class="headerlink" href="#tower-performance" title="Permalink to this heading">#</a></h2>
<p>The class tower performance finds the average building and seismic costs</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">TowerPerformance</span><span class="p">:</span>
    <span class="c1"># static variable for id</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="mi">1</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">name</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">TowerPerformance</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
            <span class="n">TowerPerformance</span><span class="o">.</span><span class="n">id</span> <span class="o">+=</span> <span class="mi">1</span>

        <span class="c1"># Variables &amp; assigned values</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">variables</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="c1"># results from SAP2000</span>
        <span class="c1"># key: load combo; values</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">maxAcc</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">maxDisp</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">basesh</span> <span class="o">=</span> <span class="p">{}</span> <span class="c1"># base shear</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">totalWeight</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">period</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="c1"># Member Stress</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tensileStress</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">compressiveStress</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bendingStress</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">shearStress</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>

        <span class="c1"># Demand-capacity ratios</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tensionDCR</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">compDCR</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">shearDCR</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="c1"># SDC metrics</span>
        <span class="c1"># key: load combo; values</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">buildingCost</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">seismicCost</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="c1"># For asymmetrical tower</span>
        <span class="c1"># key: floor; values: CRx, CRy</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">CR</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">maxEcc</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">avgEcc</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="c1"># Member Stresses</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">max_T</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">max_C</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">max_M</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">max_V</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">max_CombT</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">max_CombC</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="k">def</span> <span class="nf">addVariable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">variableName</span><span class="p">,</span> <span class="n">assignedValue</span><span class="p">):</span> <span class="c1"># Add a variable with an assigned value to the tower.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">variables</span><span class="p">[</span><span class="n">variableName</span><span class="p">]</span> <span class="o">=</span> <span class="n">assignedValue</span>

    <span class="k">def</span> <span class="nf">avgBuildingCost</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39; -&gt; float&#39;&#39;&#39;</span>
        <span class="n">avgBuildingCost</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">bdCost</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">buildingCost</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
            <span class="n">avgBuildingCost</span> <span class="o">+=</span> <span class="n">bdCost</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">buildingCost</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">avgBuildingCost</span> <span class="o">/=</span> <span class="nb">min</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">buildingCost</span><span class="p">),</span><span class="mi">1</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">avgBuildingCost</span>

    <span class="k">def</span> <span class="nf">avgSeismicCost</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39; -&gt; float&#39;&#39;&#39;</span>
        <span class="n">avgSeismicCost</span> <span class="o">=</span> <span class="mi">0</span>
      <span class="k">for</span> <span class="n">sCost</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">seismicCost</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
            <span class="n">avgSeismicCost</span> <span class="o">+=</span> <span class="n">sCost</span>
            <span class="n">avgSeismicCost</span> <span class="o">/=</span> <span class="nb">min</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">seismicCost</span><span class="p">),</span><span class="mi">1</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">avgSeismicCost</span>

    <span class="k">def</span> <span class="nf">memberStress</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39; -&gt; dataframe&#39;&#39;&#39;</span>
</pre></div>
</div>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          
          <a class="prev-page" href="Towervariation.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Tower Variation</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2023, Kaison
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Performance</a><ul>
<li><a class="reference internal" href="#performance-analyzer">Performance Analyzer</a><ul>
<li><a class="reference internal" href="#getweight">getWeight</a></li>
<li><a class="reference internal" href="#getmaxacceleration">getMaxAcceleration</a></li>
<li><a class="reference internal" href="#getperiod">getPeriod</a></li>
<li><a class="reference internal" href="#getmaxdisplacement">getMaxDisplacement</a></li>
<li><a class="reference internal" href="#getbaseshear">getBaseShear</a></li>
<li><a class="reference internal" href="#getroofnodenames">getRoofNodeNames</a></li>
<li><a class="reference internal" href="#getmemberstress">getMemberStress</a></li>
<li><a class="reference internal" href="#getcosts">getCosts</a></li>
<li><a class="reference internal" href="#getcr">getCR</a></li>
<li><a class="reference internal" href="#geteccentricity">getEccentricity</a></li>
</ul>
</li>
<li><a class="reference internal" href="#tower-performance">Tower Performance</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/sphinx_highlight.js"></script>
    <script src="_static/scripts/furo.js"></script>
    </body>
</html>